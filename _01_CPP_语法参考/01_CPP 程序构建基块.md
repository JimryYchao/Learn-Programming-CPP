## C++ ç¨‹åºæ„å»ºåŸºå—

- [ ] [ç”¨æˆ·å®šä¹‰æ–‡æœ¬](#ç”¨æˆ·å®šä¹‰æ–‡æœ¬-todo)


---
### è¯æ³•å…ƒç´ 

#### å­—ç¬¦é›†

C++ æŒ‡å®šå¯ç”¨äºæºæ–‡ä»¶çš„åŸºæœ¬æºå­—ç¬¦é›†å’Œé€šç”¨å­—ç¬¦é›†ï¼š

```c++
' ', '\t', '\v', '\f', '\n',
a b c d e f g h i j k l m n o p q r s t u v w x y z
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
0 1 2 3 4 5 6 7 8 9
_ { } [ ] # ( ) < > % : ; . ? * + - / ^ & | ~ ! = , \ " '
```

é€šç”¨å­—ç¬¦åç§°æ˜¯å½¢å¦‚ `\u hhhh` æˆ– `\U HHHHHHHH` è¡¨ç¤ºçš„ Unicode ç ä½çš„å­—ç¬¦åºåˆ—ã€‚ç”¨äºæ ‡è¯†æ ‡è¯†ç¬¦ã€å­—ç¬¦ä¸²æˆ–å­—ç¬¦æ–‡æœ¬ã€‚

æ‰§è¡Œå­—ç¬¦é›†è¡¨ç¤ºç¼–è¯‘ç¨‹åºä¸­å¯æ˜¾ç¤ºçš„å­—ç¬¦å’Œå­—ç¬¦ä¸²ã€‚è¿™äº›å­—ç¬¦é›†åŒ…å«æºæ–‡ä»¶ä¸­å…è®¸çš„æ‰€æœ‰å­—ç¬¦ï¼Œä»¥åŠè¡¨ç¤º `\a`ã€`\b`ã€`\r` å’Œ `\0` çš„æ§åˆ¶å­—ç¬¦ã€‚æ‰§è¡Œå­—ç¬¦é›†å…·æœ‰ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„è¡¨ç¤ºå½¢å¼ã€‚

>---
#### æ ‡è®°

æ ‡è®°æœ‰äº”ç§ï¼šæ ‡è¯†ç¬¦ã€å…³é”®å­—ã€æ–‡æœ¬ã€è¿ç®—ç¬¦å’Œå…¶ä»–åˆ†éš”ç¬¦ï¼›ç©ºç™½å­—ç¬¦åŒ…æ‹¬æœ‰ç©ºæ ¼ ```' '```ã€æ°´å¹³åˆ¶è¡¨ç¬¦ ```'\t'```ã€æ¢è¡Œç¬¦ ```'\n'```ã€å›è½¦ç¬¦ ```'\r'```ã€æ¢é¡µç¬¦ ```'\f'``` å’Œå‚ç›´åˆ¶è¡¨ç¬¦ ```'\v'```ã€‚æ ‡è®°ç”±ç©ºç™½ç¬¦å’Œå…¶ä»–æ ‡è®°åˆ†éš”ï¼ˆåˆ’åˆ†è¾¹ç•Œï¼‰ï¼Œåœ¨åˆ†æä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å°†å¿½ç•¥ç©ºç™½å­—ç¬¦ã€‚

æ ‡è¯†ç¬¦ä¸ºç¨‹åºä¸­çš„å¯¹è±¡ã€å˜é‡ã€ç±»å‹ã€ç±»å‹æˆå‘˜ã€å‡½æ•°ã€ç±»å‹å®šä¹‰ã€å®å®šä¹‰ã€å®å‚æ•°å‚æ•°å’Œæ ‡ç­¾æä¾›åç§°ï¼Œåç§°åœ¨æ‹¼å†™å’Œå¤§å°å†™ä¸Šå¿…é¡»ä¸ä»»ä½•å…³é”®å­—éƒ½ä¸åŒã€‚æ ‡è¯†ç¬¦çš„é¦–å­—ç¬¦ä¸å¯ä»¥æ˜¯æ•°å­—å­—ç¬¦ã€‚

```cpp
/* æœ‰æ•ˆæ ‡è¯†ç¬¦ */  // æ³¨é‡Š
_Identifier
Identifier
Identifier123
```

`final`ã€`import`ã€`module`ã€`override` ä¿ç•™å…³é”®å­—ç”± C++ ç¼–è¯‘å™¨ä½¿ç”¨ã€‚

>---
#### Keywords

| keyword | description |
| :------ | :---------- |
`alignas`
`alignof`
`asm`
`auto`
`bool`
`break`
`case`
`catch`
`char`
`char8_t`
`char16_t`
`char32_t`
`class`
`concept`
`const`
`consteval`
`constexpr`
`constinit`
`const_cast`
`continue`
`co_await`
`co_return`
`co_yield`
`decltype`
`default`
`delete`
`do`
`double`
`dynamic_cast`
`else`
`enum`
`explicit`
`export`
`extern`
`false`
`float`
`for`
`friend`
`goto`
`if`
`inline`
`int`
`long`
`mutable`
`namespace`
`new`
`noexcept`
`nullptr`
`operator`
`private`
`protected`
`public`
`register`
`reinterpret_cast`
`requires`
`return`
`short`
`signed`
`sizeof`
`static`
`static_assert`
`static_cast`
`struct`
`switch`
`template`
`this`
`thread_local`
`throw`
`true`
`try`
`typedef`
`typeid`
`typename`
`union`
`unsigned`
`using`
`virtual`
`void`
`volatile`
`wchar_t`
`while`


>---
#### Operators & Punctuation

```cpp
{ } [ ] ( )
<: :> <% %> ; : ...
? :: . .* -> ->* ~
! + - * / % ^ & |
= += -= *= /= %= ^= &= |=
== != < > <= >= <=> && ||
<< >> <<= >>= ++ -- ,
and or xor not bitand bitor compl
and_eq or_eq xor_eq not_eq
```

> æ›¿ç”¨æ ‡å¿—ï¼Œä¿ç•™

```cpp
// Alternative/Primary
    <%           {   
    %>           }    
    <:           [    
    :>           ]    
    %:           #    
    %:%:         ##   
    and          &&    
    or           ||  
    not          !  
    xor          ^     
    bitand       &    
    bitor        | 
    compl        ~     
    not_eq       !=  
    xor_eq       ^= 
    and_eq       &= 
    or_eq        |=  
```

>---
#### Number, Boolean, Pointer Literal

æ–‡æœ¬æ˜¯ä¸€ç§ç›´æ¥è¡¨ç¤ºå€¼çš„ç¨‹åºå…ƒç´ ã€‚åŒ…å«ç”±æ•´æ•°ã€æµ®ç‚¹ã€å¸ƒå°”ã€æŒ‡é’ˆã€å­—ç¬¦ã€å­—ç¬¦ä¸²ç±»å‹çš„æ–‡æœ¬ä»¥åŠç”¨æˆ·å®šä¹‰çš„æ–‡æœ¬ã€‚

æ•´æ•°æ–‡æœ¬å¯ä»¥æ˜¯äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åè¿›åˆ¶æˆ–åå…­è¿›åˆ¶çš„æ•°å­—åºåˆ—ï¼š

```cpp
long b = 0b1011'0101;      // b-binary
long o = 013245670;        // 0-octal
long i = 1234567890LL;     // decimal
long long h = 0x1234'5678'90ab'cdfLL;  // x-hexadecimal

unsigned ui = 110u;
unsigned long long uh = 0XFFFFULL; //x-hexadecimal
size_t z = -10010z;
ssize_t uz = 10086uz;
```

æµ®ç‚¹æ–‡æœ¬æ˜¯åè¿›åˆ¶æˆ–åå…­è¿›åˆ¶ï¼ˆ`0x` or `0X` å‰ç¼€ï¼‰è¡¨ç¤ºçš„æ•°å­—åºåˆ—ã€‚*E* æŒ‡æ•°è¡¨ç¤ºæ³•ï¼ˆä»¥ 10 ä¸ºåŸºæ•°ï¼‰ç”¨äºåè¿›åˆ¶ï¼›*P* æŒ‡æ•°è¡¨ç¤ºæ³•ï¼ˆä»¥ 2 ä¸ºåŸºæ•°ï¼‰ç”¨äºåå…­è¿›åˆ¶ã€‚

```c++
float f = 3.1415F;
double d = 3.1415;
long double ld = 3.1415L;
float16_t f16 = 3.1415f16;
float32_t f32 = 3.1415f32;
float64_t d2 = 3.1415f64;
float128_t f64 = 3.1415f128;
bfloat16_t bf16 = 3.1415bf16;  // BF
// decimal
double e1 = 1.234e-2; 
double e2 = 1.234E2;
// hexadecimal
double p1 = 0x1p-2;	  // == 0.25
double p2 = 0x2.p10;  // == 2048.0
```

å¸ƒå°”æ–‡æœ¬æ˜¯å…³é”®å­— `false` å’Œ `true`ã€‚æ­¤ç±»æ–‡æœ¬çš„ç±»å‹ä¸º `bool`ã€‚

æŒ‡é’ˆæ–‡æœ¬æ˜¯å…³é”®å­— `nullptr`ã€‚å®ƒçš„ç±»å‹ä¸º `std::nullptr_t`ã€‚`nullptr` ç”¨æ¥åˆå§‹åŒ–é›¶å€¼æŒ‡é’ˆã€‚



>---
#### Character, String Literal

å­—ç¬¦æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå¤šå­—èŠ‚å­—ç¬¦çš„åºåˆ—ã€‚`wchar_t`ã€`char16_t`ã€`char32_t` å­—ç¬¦ç§°ä¸ºå®½å­—ç¬¦ï¼Œ`char8_t` å’Œæ™®é€šå­—ç¬¦ä¸ºçª„å­—ç¬¦ã€‚åºåˆ—å…ƒç´ æ˜¯æºå­—ç¬¦é›†çš„ä»»ä½•æˆå‘˜ï¼›å®ƒä»¬ä»¥å®ç°å®šä¹‰çš„æ–¹å¼æ˜ å°„åˆ°æ‰§è¡Œå­—ç¬¦é›†çš„æˆå‘˜ã€‚

```c++
// Character literals
auto c0 =   'A';  // char; æ™®é€šå­—ç¬¦
auto c1 = u8'A';  // char; UTF-8
auto c2 =  L'A';  // wchar_t; å®½å­—ç¬¦
auto c3 =  u'A';  // char16_t; UTF-16
auto c4 =  U'A';  // char32_t; UTF-32
auto m0 = 'abcd'; // int, value 0x61626364; å¤šå­—èŠ‚

// å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶è½¬ä¹‰åºåˆ—å’Œé€šç”¨å­—ç¬¦åºåˆ—
char u1 = 'A';          // 'A'
char u2 = '\101';       // octal, 'A'; 1-3 ä½å…«è¿›åˆ¶ï¼Œæœ€å¤§ \377
char u3 = '\x41';       // hexadecimal, 'A'
char u4 = '\u0041';     // \u UCN 'A'
char u5 = '\U00000041'; // \U UCN 'A'

// è½¬ä¹‰å­—ç¬¦
'\'' '\"' '\?' '\\' '\a' '\b' '\f' '\n' '\r' '\t' '\v'
```

å­—ç¬¦ä¸²æ–‡æœ¬çš„ç§ç±»ã€ç±»å‹åŠå…¶å…³è”çš„å­—ç¬¦ç¼–ç ç”±å…¶ç¼–ç å‰ç¼€å’Œå­—ç¬¦åºåˆ—å†³å®šã€‚å¸¸è§„å­—ç¬¦ä¸²æ–‡æœ¬å’Œ UTF-8 å­—ç¬¦ä¸²æ–‡æœ¬ç§°ä¸ºçª„å­—ç¬¦ä¸²æ–‡æœ¬ã€‚

```c++
auto s0 =   "hello"; // const char*
auto s1 = u8"hello"; // const char8_t* 
auto s2 =  L"hello"; // const wchar_t*
auto s3 =  u"hello"; // const char16_t*, encoded as UTF-16
auto s4 =  U"hello"; // const char32_t*, encoded as UTF-32
const char32_t* s5 = U"ğŸ˜ = \U0001F60E is B-)";
```

å‰ç¼€ä¸­å¸¦æœ‰ R çš„å­—ç¬¦ä¸²æ–‡æœ¬æ˜¯åŸå§‹å­—ç¬¦ä¸²æ–‡æœ¬ã€‚`R"delimiter( char-sequence )delimiter"` ä¸­ `delimiter` æœ€å¤šåŒ…å« 16 ä¸ªå­—ç¬¦ï¼›`R"((a|b))"` ç­‰ä»·äº `"(a|b)"`ã€‚

```c++
auto R0 =   R"("Hello \ world")"; // const char*
auto R1 = u8R"("Hello \ world")"; // const char8_t*
auto R2 =  LR"("Hello \ world")"; // const wchar_t*
auto R3 =  uR"("Hello \ world")"; // const char16_t*, encoded as UTF-16
auto R4 =  UR"("Hello \ world")"; // const char32_t*, encoded as UTF-32
```

`s` åç¼€è¡¨ç¤ºæ˜ å°„åˆ° `std::string` ç±»å‹çš„é™æ€å€¼ã€‚

```c++
auto S0 =   "hello"s; // std::string
auto S1 = u8"hello"s; // std::u8string in C++20
auto S2 =  L"hello"s; // std::wstring
auto S3 =  u"hello"s; // std::u16string
auto S4 =  U"hello"s; // std::u32string

auto S5 =   R"("Hello \ world")"s; // std::string from a raw const char*
auto S6 = u8R"("Hello \ world")"s; // std::u8string from a raw const char* 
auto S7 =  LR"("Hello \ world")"s; // std::wstring from a raw const wchar_t*
auto S8 =  uR"("Hello \ world")"s; // std::u16string from a raw const char16_t*, encoded as UTF-16
auto S9 =  UR"("Hello \ world")"s; // std::u32string from a raw const char32_t*, encoded as UTF-32
```

ç›¸é‚»å­—ç¬¦ä¸²æ–‡æœ¬åºåˆ—çš„å…¬å…±ç¼–ç å‰ç¼€è¦ä¹ˆç›¸åŒï¼Œè¦ä¹ˆå…¶ä¸­ä¸€ä¸ªæ²¡æœ‰ç¼–ç å‰ç¼€ï¼›ä»»ä½•å…¶ä»–ç»„åˆéƒ½æ˜¯æ ¼å¼ä¸æ­£ç¡®çš„ã€‚è®¡ç®—å­—ç¬¦ä¸²æ–‡æœ¬ä¼šç”Ÿæˆå…·æœ‰é™æ€å­˜å‚¨æŒç»­æ—¶é—´çš„å­—ç¬¦ä¸²æ–‡æœ¬å¯¹è±¡ã€‚

```c++
char str[] = "12" "34";  // "1234"
auto hi = u8"hello" " " "world"s;
auto err = U"hello" " " L"world"; // disagree on prefix
```

>---
#### ç”¨æˆ·å®šä¹‰æ–‡æœ¬ TODO






---
### åŸºæœ¬æ¦‚å¿µ
#### ç¿»è¯‘é˜¶æ®µ

æºæ–‡ä»¶ä»¥åŠé€šè¿‡é¢„å¤„ç†æŒ‡ä»¤ `#include` åŒ…å«çš„æ‰€æœ‰å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶ï¼Œå»æ‰ä»»ä½•è¢«æ¡ä»¶ç¼–è¯‘ `#if` è·³è¿‡çš„éƒ¨åˆ†ï¼Œä»¥åŠç”±ä»»ä½•æ¡ä»¶æ”¯æŒçš„æŒ‡ä»¤å’Œç¼–è¯‘æŒ‡ç¤ºçš„å®ç°å®šä¹‰è¡Œä¸ºä¿®æ”¹ï¼Œè¢«ç§°ä¸ºé¢„å¤„ç†ç¿»è¯‘å•å…ƒã€‚

æºæ–‡ä»¶ä¸éœ€è¦å…¨éƒ¨åŒæ—¶ç¿»è¯‘ï¼Œç¿»è¯‘å•å…ƒå’Œå®ä¾‹åŒ–å•å…ƒå¯ä»¥å•ç‹¬ä¿å­˜æˆ–ä¿å­˜åœ¨åº“ä¸­ï¼Œç¨‹åºçš„å•ç‹¬ç¿»è¯‘å•å…ƒé€šè¿‡è°ƒç”¨å…·æœ‰å¤–éƒ¨é“¾æ¥æˆ–æ¨¡å—é“¾æ¥çš„å‡½æ•°ã€å¯¹è±¡ç­‰çš„æ ‡è¯†ç¬¦ã€æˆ–æ“ä½œæ•°æ®æ–‡ä»¶è¿›è¡Œé€šä¿¡ã€‚ç¿»è¯‘å•å…ƒå¯ä»¥å•ç‹¬ç¿»è¯‘ï¼Œç„¶åé“¾æ¥å…¶ä»–å•å…ƒä»¥ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦åœ¨ .cpp æ–‡ä»¶ä¸­å£°æ˜å…¨å±€å˜é‡æˆ–ç±»ã€‚ åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä¸€ç§æ–¹æ³•æ¥å‘ŠçŸ¥ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨åç§°æ‰€å…·æœ‰çš„é“¾æ¥ç±»å‹ã€‚ é“¾æ¥çš„ç±»å‹æŒ‡å®šå¯¹è±¡çš„åç§°æ˜¯ä»…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¯è§ï¼Œè¿˜æ˜¯åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­å¯è§ã€‚ é“¾æ¥çš„æ¦‚å¿µä»…é€‚ç”¨äºå…¨å±€åç§°ã€‚ é“¾æ¥çš„æ¦‚å¿µä¸é€‚ç”¨äºåœ¨ä¸€å®šèŒƒå›´å†…å£°æ˜çš„åç§°ã€‚ èŒƒå›´æ˜¯ç”±ä¸€ç»„å°é—­çš„å¤§æ‹¬å·æŒ‡å®šçš„ï¼Œä¾‹å¦‚åœ¨å‡½æ•°æˆ–ç±»çš„å®šä¹‰ä¸­ã€‚

1. å­—ç¬¦æ˜ å°„ï¼šæºæ–‡ä»¶ä¸­çš„å­—ç¬¦å°†æ˜ å°„åˆ°å†…éƒ¨æºè¡¨ç¤ºå½¢å¼ã€‚
2. è¡Œæ‹¼æ¥ï¼šä»¥åæ–œæ  (`\`) ç»“æŸä¸”åè·Ÿæ¢è¡Œç¬¦çš„æ‰€æœ‰è¡Œå°†ä¸æºæ–‡ä»¶ä¸­ä»ç‰©ç†è¡Œå½¢æˆé€»è¾‘è¡Œçš„ä¸‹ä¸€è¡Œè”æ¥ã€‚
3. ä»¤ç‰ŒåŒ–ï¼šæºæ–‡ä»¶åˆ†ä¸ºé¢„å¤„ç†æ ‡è®°å’Œç©ºç™½å­—ç¬¦ã€‚ æºæ–‡ä»¶ä¸­çš„æ³¨é‡Šå°†é€ä¸€æ›¿æ¢ä¸ºç©ºç™½å­—ç¬¦ã€‚ æ¢è¡Œç¬¦å°†ä¿ç•™ã€‚
4. é¢„å¤„ç†ï¼šæ‰§è¡Œé¢„å¤„ç†æŒ‡ä»¤ï¼Œæ‰©å±•å®è°ƒç”¨ï¼Œå¹¶æ‰§è¡Œ `_Pragma` è¡¨è¾¾å¼ã€‚`#include` è¯­å¥æŒ‰ç¬¬ 1 ~ 4 é˜¶æ®µé€’å½’å¤„ç†ã€‚ç„¶ååˆ é™¤æ‰€æœ‰é¢„å¤„ç†æŒ‡ä»¤ã€‚
5. å­—ç¬¦é›†æ˜ å°„ï¼šæ‰€æœ‰æºå­—ç¬¦é›†æˆå‘˜å’Œè½¬ä¹‰åºåˆ—å°†è½¬æ¢ä¸ºæ‰§è¡Œå­—ç¬¦é›†ä¸­çš„ç­‰æ•ˆé¡¹ã€‚
6. å­—ç¬¦ä¸²ä¸²è”ï¼šä¸²è”ç›¸é‚»çš„å­—ç¬¦ä¸²æ–‡å­—ä»¤ç‰Œã€‚
7. ç¿»è¯‘ï¼šå°†ä»è¯­æ³•å’Œè¯­ä¹‰ä¸Šåˆ†ææ‰€æœ‰ä»¤ç‰Œï¼›å¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºå¯¹è±¡ä»£ç ã€‚
8. å®ä¾‹åŒ–å•å…ƒï¼šæ£€æŸ¥æ¯ä¸ªç¿»è¯‘çš„ç¿»è¯‘å•å…ƒï¼Œä»¥ç”Ÿæˆæ‰€éœ€å®ä¾‹åŒ–çš„åˆ—è¡¨ã€‚æ‰¾åˆ°æ‰€éœ€æ¨¡æ¿çš„å®šä¹‰ã€‚
9. é“¾æ¥ï¼šè§£ææ‰€æœ‰å¤–éƒ¨å¼•ç”¨ä»¥åˆ›å»ºå¯æ‰§è¡Œç¨‹åºæˆ–åŠ¨æ€é“¾æ¥åº“ã€‚

>---
#### ç¨‹åºå¯åŠ¨

ç¨‹åºå¯åŠ¨éœ€è¦å…¥å£å‡½æ•° `main`ï¼ŒåŠ¨æ€é“¾æ¥åº“å’Œé™æ€åº“æ²¡æœ‰ `main` å‡½æ•°ã€‚ç¨‹åºè¿›å…¥ `main` å‡½æ•°ä¹‹å‰ï¼Œæ²¡æœ‰åˆå§‹å€¼è®¾å®šé¡¹ `static` ç±»æˆå‘˜é›¶åˆå§‹åŒ–ã€‚

```c++
int main(); // æˆ–
int main(int argc, char *argv[]);
```

`argc` å’Œ `argv` çš„ç±»å‹ç”±è¯­è¨€å®šä¹‰ã€‚`argc` åŒ…å« `argv` å‚æ•°çš„è®¡æ•°ï¼Œ`argv` è‡³å°‘åŒ…å«ç¨‹åºåç§°çš„ `argv[0]`ã€‚`argv[1]` æ˜¯ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ã€‚ å‘½ä»¤è¡Œçš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ `argv[argc - 1]`ï¼Œå¹¶ä¸” `argv[argc]` å§‹ç»ˆä¸º `NULL`ã€‚

```c++
#include <iostream>

using namespace std;
int main( int argc,      // Number of strings in array argv
          char *argv[])   // Array of command-line argument strings
{
    int count;
    // Display each command-line argument.
    cout << "\nCommand-line arguments:\n";
    for( count = 0; count < argc; count++ )
         cout << "  argv[" << count << "]   "
                << argv[count] << "\n";
}
```


>---
#### ç¨‹åºç»ˆæ­¢

åœ¨ C++ ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é€€å‡ºç¨‹åºï¼š

- è°ƒç”¨ `exit` å‡½æ•°ï¼Œç»ˆæ­¢ç¨‹åºå¹¶æ‰§è¡Œæ¸…ç†ï¼ˆå¦‚è°ƒç”¨å…¨å±€å¯¹è±¡ææ„å‡½æ•°ï¼‰ã€‚
- è°ƒç”¨ `abort` å‡½æ•°ã€‚ç«‹å³ç»ˆæ­¢ç¨‹åºï¼Œè·³è¿‡ `atexit` æœºåˆ¶ã€‚
- ä» `main` æ‰§è¡Œ `return` è¯­å¥ã€‚

```c++
#include <cstdlib>

int main() {
    if (cond1){
        exit(EXIT_SUCCESS);  // or EXIT_FAILURE 
    }else if (cond2) {
        abort();
    }else 
        return 0;
}
```

`atexit` ç”¨äºåœ¨ç¨‹åºç»ˆæ­¢ä¹‹å‰æ‰§è¡Œçš„æ“ä½œï¼Œåœ¨æ­¤ä¹‹å‰ä¸ä¼šé”€æ¯ä»»ä½•åˆå§‹åŒ–çš„å…¨å±€é™æ€å¯¹è±¡ã€‚

ä½¿ç”¨ `return` è¯­å¥å¯ä»¥ä» `main` æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ï¼Œä»»ä½•è‡ªåŠ¨å˜é‡éƒ½å°†è¢«é”€æ¯ã€‚ ç„¶åï¼Œ`main` ä»¥è¿”å›å€¼ä½œä¸ºå‚æ•°è°ƒç”¨ `exit`ã€‚ç›´æ¥è°ƒç”¨ `exit` ä¸ä¼šé”€æ¯è‡ªåŠ¨å˜é‡ã€‚

> çº¿ç¨‹å’Œé™æ€å¯¹è±¡çš„é”€æ¯

ç›´æ¥è°ƒç”¨ `exit` æ—¶ï¼ˆæˆ–åœ¨ `main` çš„ `return` è¯­å¥ä¹‹åè°ƒç”¨å®ƒæ—¶ï¼‰ï¼Œå°†é”€æ¯ä¸å½“å‰çº¿ç¨‹å…³è”çš„çº¿ç¨‹å¯¹è±¡ã€‚ç„¶åæŒ‰ä¸åˆå§‹åŒ–ç›¸åçš„é¡ºåºé”€æ¯é™æ€å¯¹è±¡ï¼ˆåœ¨è°ƒç”¨æŒ‡å®šç»™ `atexit` çš„å‡½æ•°ï¼ˆå¦‚æœæœ‰ï¼‰ä¹‹åï¼‰ã€‚ 

```c++
#include <cstdio>
class ShowData {
public:
	ShowData(const char* szDev) {
		errno_t err;
		err = fopen_s(&OutputDev, szDev, "w");
	}

	~ShowData() { fclose(OutputDev); }
	void Disp(const char* szData) {
		fputs(szData, OutputDev);
	}
private:
	FILE* OutputDev;
};
//  Define a static object of type ShowData. The output device
//   selected is "CON" -- the standard output device.
ShowData sd1 = "CON";
ShowData sd2 = "CON";

int main() {
	sd1.Disp("hello sd1\n");
	sd2.Disp("hello sd2\n");  // ç›¸åé¡ºåºé”€æ¯å¹¶è°ƒç”¨ ~ShowData()
}
// hello sd2  
// hello sd1
```

>---
#### ç±»å‹ç³»ç»Ÿ

æ ‡é‡ç±»å‹ï¼šåŒ…å«å®šä¹‰èŒƒå›´çš„å•ä¸ªå€¼çš„ç±»å‹ã€‚æ ‡é‡åŒ…æ‹¬ç®—æœ¯ç±»å‹ï¼ˆæ•´å‹æˆ–æµ®ç‚¹å€¼ï¼‰ã€æšä¸¾ç±»å‹æˆå‘˜ã€æŒ‡é’ˆç±»å‹ã€æŒ‡é’ˆåˆ°æˆå‘˜ç±»å‹ä»¥åŠ std::nullptr_tã€‚åŸºæœ¬ç±»å‹é€šå¸¸æ˜¯æ ‡é‡ç±»å‹ã€‚

å¤åˆç±»å‹ï¼šå¤åˆç±»å‹åŒ…æ‹¬æ•°ç»„ç±»å‹ã€å‡½æ•°ç±»å‹ã€ç±»ï¼ˆæˆ–ç»“æ„ï¼‰ç±»å‹ã€è”åˆç±»å‹ã€æšä¸¾ã€å¼•ç”¨å’ŒæŒ‡å‘éé™æ€ç±»æˆå‘˜çš„æŒ‡é’ˆã€‚

å˜é‡ï¼šæ•°æ®é‡çš„ç¬¦å·åç§°ã€‚è¯¥åç§°å¯ç”¨äºè®¿é—®å®ƒåœ¨æ•´ä¸ªå®šä¹‰ä»£ç èŒƒå›´å†…å¼•ç”¨çš„æ•°æ®ã€‚å˜é‡é€šå¸¸æŒ‡æ ‡é‡å®ä¾‹ï¼Œå…¶ä»–ç±»çš„å®ä¾‹ä¸ºå¯¹è±¡ã€‚

å¯¹è±¡ï¼šè¡¨ç¤ºç±»æˆ–ç»“æ„çš„å®ä¾‹ã€‚åœ¨ä¸€èˆ¬æ„ä¹‰ä¸ŠåŒ…æ‹¬æ‰€æœ‰ç±»å‹ã€‚

POD ç±»å‹ï¼ˆçº¯æ—§æ•°æ®ï¼‰ï¼šC++ ä¸­æ­¤ç±»éæ­£å¼æ•°æ®ç±»å‹ç±»åˆ«æ˜¯æŒ‡ä½œä¸ºæ ‡é‡çš„ç±»å‹æˆ– POD ç±»ã€‚POD ç±»æ²¡æœ‰é POD çš„é™æ€æ•°æ®æˆå‘˜ï¼Œæ²¡æœ‰ç”¨æˆ·å®šä¹‰æ„é€ å‡½æ•°ã€ç”¨æˆ·å®šä¹‰ææ„å‡½æ•°æˆ–ç”¨æˆ·å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦ã€‚POD ç±»æ— è™šå‡½æ•°ã€åŸºç±»ã€ç§æœ‰æˆ–å—ä¿æŠ¤çš„éé™æ€æ•°æ®æˆå‘˜ã€‚é€šå¸¸ç”¨äºå¤–éƒ¨æ•°æ®äº¤æ¢ï¼Œä¾‹å¦‚ä¸ç”¨ C è¯­è¨€ç¼–å†™çš„æ¨¡å—ï¼ˆä»…å…·æœ‰ POD ç±»å‹ï¼‰è¿›è¡Œæ•°æ®äº¤æ¢ã€‚

C++ æ˜¯å¼ºç±»å‹çš„é™æ€ç±»å‹è¯­è¨€ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»å‹ã€‚C++ ä¸­ä¸å­˜åœ¨æ´¾ç”Ÿæ‰€æœ‰å…¶ä»–ç±»å‹çš„é€šç”¨åŸºç±»å‹ã€‚C++ çš„å†…ç½®ç±»å‹åŒ…æ‹¬æ•°å€¼ç±»å‹ï¼ˆ`int`ã€`double`ã€`long`ã€`bool` ä»¥åŠåˆ†åˆ«é’ˆå¯¹ ASCII å’Œ UNICODE å­—ç¬¦çš„ `char` å’Œ `wchar_t` ç±»å‹ç­‰ï¼‰ã€‚C++ æ²¡æœ‰å†…ç½®å­—ç¬¦ä¸²ç±»å‹ï¼Œå®ƒæ˜¯ C æ ·å¼å­—ç¬¦ä¸²ã€‚


ä»»ä½•å†…ç½®æˆ–ç”¨æˆ·å®šä¹‰ç±»å‹éƒ½å¯ç”± `const` é™å®šã€‚ æˆå‘˜å‡½æ•°å¯å—åˆ° `const` é™å®šï¼Œä¹Ÿå¯ä»¥é‡è½½ `const`ã€‚`const` ç±»å‹çš„å€¼åˆå§‹åŒ–åæ— æ³•ä¿®æ”¹ã€‚ç”¨æˆ·å®šä¹‰ç±»å‹åŒ…å« `class`ã€`struct`ã€`union`ã€`enum`ã€‚

åœ¨ C++ ä¸­ï¼ŒåŸå§‹æŒ‡é’ˆå˜é‡å£°æ˜åªåˆ†é…è¶³å¤Ÿçš„å†…å­˜æ¥å­˜å‚¨åœ°å€ï¼Œä¸åŒ…å«å­˜å‚¨æ•°æ®å€¼æ‰€éœ€çš„å†…å­˜ï¼›ç”¨æˆ·å®šä¹‰ç±»å‹å¯ä»¥é€šè¿‡ `new` è¡¨è¾¾å¼åœ¨å †ä¸­åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå¹¶åœ¨å¿…è¦æ—¶ç”±ç›¸åº”çš„ `delete` åˆ é™¤ï¼ˆCï¼š`malloc` > `free`ï¼‰ã€‚


>---
#### èŒƒå›´, é“¾æ¥å’Œå­˜å‚¨æœŸ

ç¨‹åºä¸­çš„å£°æ˜å¯ä»¥å‡ºç°åœ¨å¾ˆå¤šèŒƒå›´ï¼ˆ*scope*ï¼Œä½œç”¨åŸŸï¼‰ä¸­ã€‚å…¨å±€èŒƒå›´åŒ…å«æ•´ä¸ªç¨‹åºã€‚åç§°å¯è§çš„ä¸Šä¸‹æ–‡ç§°ä¸ºå…¶ç›®æ ‡èŒƒå›´ã€‚æœ‰å…­ç§èŒƒå›´ï¼š

- å…¨å±€èŒƒå›´ï¼šå…¨å±€åç§°æ˜¯åœ¨ä»»ä½•ç±»ã€å‡½æ•°æˆ–å‘½åç©ºé—´ä¹‹å¤–å£°æ˜çš„åç§°ã€‚å…¨å±€åç§°çš„èŒƒå›´ä»å£°æ˜ç‚¹æ‰©å±•åˆ°å£°æ˜æ–‡ä»¶æœ«å°¾ã€‚

+ å‘½åç©ºé—´èŒƒå›´ï¼šåœ¨å‘½åç©ºé—´ä¸­å£°æ˜çš„åç§°ï¼ˆåœ¨ä»»ä½•ç±»ã€æšä¸¾å®šä¹‰ã€æˆ–å‡½æ•°å—ä¹‹å¤–ï¼‰ä»å…¶å£°æ˜ç‚¹åˆ°å‘½åç©ºé—´æœ«å°¾å¯è§ã€‚å‘½åç©ºé—´å¯ä»¥åœ¨è·¨ä¸åŒæ–‡ä»¶çš„å¤šä¸ªå—ä¸­å®šä¹‰ã€‚

- å±€éƒ¨èŒƒå›´ï¼šåœ¨å‡½æ•°æˆ– lambda ä¸­å£°æ˜çš„åç§°ï¼ˆåŒ…æ‹¬å‚æ•°åç§°ï¼‰å…·æœ‰å±€éƒ¨èŒƒå›´ã€‚å±€éƒ¨å˜é‡ä»…ä»å£°æ˜ç‚¹åˆ°å‡½æ•°æˆ– lambda æ­£æ–‡çš„æœ«å°¾å¯è§ã€‚å±€éƒ¨èŒƒå›´æ˜¯ä¸€ç§å—èŒƒå›´ã€‚

+ ç±»èŒƒå›´ï¼šç±»æˆå‘˜çš„åç§°å…·æœ‰ç±»èŒƒå›´ï¼Œè¯¥èŒƒå›´åœ¨æ•´ä¸ªç±»å®šä¹‰ä¸­æ‰©å±•ï¼Œä¸å£°æ˜ç‚¹æ— å…³ã€‚ç±»æˆå‘˜å¯è®¿é—®æ€§ç”± `public`ã€`private` å’Œ `protected` å…³é”®å­—è¿›ä¸€æ­¥æ§åˆ¶ã€‚

- è¯­å¥èŒƒå›´ï¼šåœ¨ `for`ã€`if`ã€`while` æˆ– `switch` è¯­å¥ä¸­å£°æ˜çš„åç§°åœ¨è¯­å¥å—ç»“æŸä¹‹å‰å¯è§ã€‚

+ æ ‡ç­¾èŒƒå›´ï¼šæ ‡ç­¾å…·æœ‰å‡½æ•°èŒƒå›´ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨æ•´ä¸ªå‡½æ•°æ­£æ–‡ä¸­ç”šè‡³åœ¨å£°æ˜ç‚¹ä¹‹å‰éƒ½æ˜¯å¯è§çš„ã€‚

ä¸€ä¸ª *symbol*ï¼ˆä¾‹å¦‚å˜é‡æˆ–å‡½æ•°åç§°ï¼‰å¯ä»¥åœ¨å…¶èŒƒå›´å†…è¿›è¡Œä»»æ„æ¬¡æ•°çš„å£°æ˜ã€‚ä½†ä¸€ä¸ªç¬¦å·åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ï¼ˆå•ä¸€å®šä¹‰åŸåˆ™ï¼ŒODRï¼‰ã€‚å£°æ˜åœ¨ç¨‹åºä¸­ï¼ˆé‡æ–°ï¼‰å¼•å…¥ä¸€ä¸ªåç§°å’Œè¶³å¤Ÿçš„ç±»å‹ä¿¡æ¯ï¼Œå®šä¹‰å¼•å…¥ä¸€ä¸ªåç§°å¹¶åˆ›å»ºå®ƒæ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚åç§°è¡¨ç¤ºå˜é‡ï¼Œå®šä¹‰ä¼šæ˜¾å¼åˆ›å»ºå­˜å‚¨å¹¶è¿›è¡Œåˆå§‹åŒ–ã€‚å‡½æ•°å®šä¹‰ç”±ç­¾åå’Œå‡½æ•°ä½“ç»„æˆã€‚ç±»å®šä¹‰ç”±ç±»åå’Œåˆ—å‡ºçš„æ‰€æœ‰ç±»æˆå‘˜å’Œæˆå‘˜å‡½æ•°ç»„æˆã€‚ 

ä¸€ä¸ªç¨‹åºåŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªç¿»è¯‘å•å…ƒã€‚ä¸€ä¸ªç¿»è¯‘å•å…ƒç”±ä¸€ä¸ªå®ç°æ–‡ä»¶åŠå…¶ç›´æ¥æˆ–é—´æ¥åŒ…å«çš„æ‰€æœ‰æ ‡å¤´ç»„æˆã€‚ å®ç°æ–‡ä»¶é€šå¸¸å…·æœ‰ `.cpp` æˆ– `.cxx`ã€‚å¤´æ–‡ä»¶é€šå¸¸å…·æœ‰ `.h` æˆ– `.hpp`ã€‚ æ¯ä¸ªç¿»è¯‘å•å…ƒç”±ç¼–è¯‘å™¨ç‹¬ç«‹ç¼–è¯‘ã€‚ç¼–è¯‘å®Œæˆåï¼Œé“¾æ¥å™¨ä¼šå°†ç¼–è¯‘åçš„ç¿»è¯‘å•å…ƒåˆå¹¶åˆ°å•ä¸ªç¨‹åºä¸­ã€‚ODR è§„åˆ™çš„å†²çªé€šå¸¸æ˜¾ç¤ºä¸ºé“¾æ¥å™¨é”™è¯¯ã€‚åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­å®šä¹‰åŒä¸€åç§°æ—¶ï¼Œå°†å‘ç”Ÿé“¾æ¥å™¨é”™è¯¯ã€‚

é€šå¸¸ï¼Œä½¿å˜é‡åœ¨å¤šä¸ªæ–‡ä»¶ä¸­å¯è§çš„æœ€ä½³æ–¹å¼æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å®ƒã€‚ç„¶åï¼Œåœ¨éœ€è¦å£°æ˜çš„æ¯ä¸ª `.cpp` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª `#include` æŒ‡ä»¤ã€‚é€šè¿‡åœ¨æ ‡å¤´å†…å®¹å‘¨å›´æ·»åŠ  `include` é˜²å«ï¼Œå¯ä»¥ç¡®ä¿æ ‡å¤´å£°æ˜çš„åç§°å¯¹æ¯ä¸ªç¿»è¯‘å•å…ƒåªå£°æ˜ä¸€æ¬¡ã€‚ä»…åœ¨ä¸€ä¸ªå®ç°æ–‡ä»¶ä¸­å®šä¹‰åç§°ã€‚

```c++
#ifndef HEADER_H
#  define HEADER_H
   // ... code in header.h
#endif
```

åœ¨ C++20 ä¸­ï¼Œæ¨¡å—ä½œä¸ºå¤´æ–‡ä»¶çš„æ”¹è¿›æ›¿ä»£æ–¹æ³•å¼•å…¥ã€‚

```c++
import std.compat;
int main()
{
    printf("Hello World");
}
```

é“¾æ¥çš„ç±»å‹æŒ‡å®šå¯¹è±¡çš„åç§°æ˜¯ä»…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¯è§ï¼Œè¿˜æ˜¯åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­å¯è§ã€‚*Free* å‡½æ•°æ˜¯åœ¨å…¨å±€èŒƒå›´æˆ–å‘½åç©ºé—´èŒƒå›´å†…å®šä¹‰çš„å‡½æ•°ã€‚éå¸¸é‡å…¨å±€å˜é‡å’Œ *Free* å‡½æ•°é€šå¸¸å…·æœ‰å¤–éƒ¨é“¾æ¥ï¼›å®ƒä»¬åœ¨ç¨‹åºä¸­çš„ä»»ä½•ç¿»è¯‘å•å…ƒå†…å¯è§ã€‚å¯ä»¥å°†ä¸€ä¸ªå…¨å±€åç§°å£°æ˜ä¸º `static`ï¼›å£°æ˜ä¸º `const`, `constexpr`, `typedef`, å…¨å±€èŒƒå›´çš„ `static` å¯¹è±¡å…·æœ‰å†…éƒ¨é“¾æ¥ï¼›`extern` æ˜¾å¼å£°æ˜å¤–éƒ¨é“¾æ¥ã€‚

```c++
constexpr int czero = 0;
const struct S { int v; };
typedef struct S S;
static S Max{ INT_MAX };

extern const S Zero { 0 };  // å¤–éƒ¨é“¾æ¥
```

>---
#### Lvalues å’Œ Rvalues

æ¯ä¸ª C++ è¡¨è¾¾å¼éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œå±äºå€¼ç±»åˆ«ã€‚å€¼ç±»åˆ«æ˜¯ç¼–è¯‘å™¨åœ¨è¡¨è¾¾å¼è®¡ç®—æœŸé—´åˆ›å»ºã€å¤åˆ¶å’Œç§»åŠ¨ä¸´æ—¶å¯¹è±¡æ—¶å¿…é¡»éµå¾ªçš„è§„åˆ™çš„åŸºç¡€ã€‚
-*glvalue* æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒçš„è®¡ç®—å¯ä»¥ç¡®å®šå¯¹è±¡ã€ä½åŸŸæˆ–å‡½æ•°çš„æ ‡è¯†ã€‚
- *prvalue* æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒçš„è®¡ç®—å¯ä»¥åˆå§‹åŒ–å¯¹è±¡æˆ–ä½åŸŸï¼Œæˆ–è®¡ç®—è¿ç®—ç¬¦çš„æ“ä½œæ•°å€¼ï¼Œç”±å®ƒå‡ºç°çš„ä¸Šä¸‹æ–‡æ‰€æŒ‡å®šçš„ã€‚
- *xvalue* æ˜¯ä¸€ä¸ª *glvalue*ï¼Œè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æˆ–ä½åŸŸï¼Œè¯¥å¯¹è±¡æˆ–ä½åŸŸçš„èµ„æºå¯é‡å¤ä½¿ç”¨ï¼ˆé€šå¸¸æ˜¯å› ä¸ºå®ƒæ¥è¿‘å…¶ç”Ÿå­˜æœŸçš„æœ«å°¾ï¼‰ã€‚æŸäº›æ¶‰åŠ *rvalue* å¼•ç”¨çš„ç±»å‹çš„è¡¨è¾¾å¼ä¼šç”Ÿæˆ *xvalue*ï¼Œä¾‹å¦‚å¯¹è¿”å›ç±»å‹ä¸º *rvalue* å¼•ç”¨æˆ–å¼ºåˆ¶è½¬æ¢ä¸º *rvalue* å¼•ç”¨ç±»å‹çš„å‡½æ•°çš„è°ƒç”¨ã€‚
- *lvalue* ä¸ºé *xvalue* çš„ *glvalue*ã€‚
- *rvalue* æ˜¯ä¸€ä¸ª *prvalue* æˆ– *xvalue*ã€‚

> *å„ç±»åˆ«ä¹‹é—´çš„å…³ç³»*
<pre>
                          lvalue
                glvalue â€”|
   expression â€”|         xvalue
                rvalue  â€”|
                          prvalue  
</pre>

*lvalue* å…·æœ‰ç¨‹åºå¯è®¿é—®çš„åœ°å€ã€‚*lvalue* è¡¨è¾¾å¼åŒ…æ‹¬å˜é‡åç§°ï¼Œä¾‹å¦‚ `const` å˜é‡ã€æ•°ç»„å…ƒç´ ã€è¿”å› *lvalue* å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ã€ä½åŸŸã€è”åˆå’Œç±»æˆå‘˜ã€‚

*prvalue* è¡¨è¾¾å¼æ²¡æœ‰å¯ä¾›ç¨‹åºè®¿é—®çš„åœ°å€ã€‚ä¾‹å¦‚ï¼Œ*prvalue* è¡¨è¾¾å¼åŒ…æ‹¬æ–‡æœ¬ã€å¯è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨ï¼Œä»¥åŠåœ¨è¡¨è¾¾å¼è®¡ç®—æœŸé—´åˆ›å»ºä¸”ç”±ç¼–è¯‘å™¨è®¿é—®çš„ä¸´æ—¶å¯¹è±¡ã€‚

*xvalue* è¡¨è¾¾å¼æœ‰ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€ä¸å†å¯ä¾›ç¨‹åºè®¿é—®ï¼Œä½†å¯ç”¨äºåˆå§‹åŒ– *rvalue* å¼•ç”¨ï¼Œä»¥æä¾›å¯¹è¡¨è¾¾å¼çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œå®ƒåŒ…æ‹¬å¯è¿”å› *rvalue* å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ï¼Œä»¥åŠæ•°ç»„ä¸‹æ ‡ã€æˆå‘˜å’ŒæŒ‡å‘å…¶ä¸­æ•°ç»„æˆ–å¯¹è±¡æ˜¯ *rvalue* å¼•ç”¨çš„æˆå‘˜è¡¨è¾¾å¼çš„æŒ‡é’ˆã€‚

>---
#### å¯¹é½æ–¹å¼

C++ çš„ä½çº§åŠŸèƒ½ä¹‹ä¸€æ˜¯èƒ½å¤ŸæŒ‡å®šå†…å­˜ä¸­å¯¹è±¡çš„ç²¾ç¡®å¯¹é½æ–¹å¼ï¼Œä»¥æœ€å¤§é™åº¦åˆ©ç”¨ç‰¹å®šçš„ç¡¬ä»¶ä½“ç³»ç»“æ„ã€‚é»˜è®¤æƒ…å†µä¸‹ã€ç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»æˆ–ç»“æ„æˆå‘˜çš„å€¼çš„å¤§å°è¿›è¡Œå¯¹é½ï¼š`bool` å’Œ `char` åœ¨ 1 å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ï¼Œ`short` åœ¨ 2 å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ï¼Œ`int`ã€`long` å’Œ `float` åœ¨ 4 å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ï¼Œ`long long`ã€`double` å’Œ `long double` åœ¨ 8 å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ã€‚

å¯ä»¥ä½¿ç”¨ `alignof` å’Œ `alignas` æ¥è·å–æˆ–æŒ‡å®šå¯¹è±¡çš„å¯¹é½æ–¹å¼ï¼›å¯¹é½æ–¹å¼æ˜¯å†…å­˜åœ°å€çš„ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºä¸ºæ•°å­—åœ°å€å¯¹ 2 çš„å¹‚æ¬¡æ–¹å–æ¨¡ï¼Œä¾‹å¦‚ï¼Œåœ°å€ 0x0001103F å¯¹ 4 å–æ¨¡ä¸º 3ï¼Œè¯¥åœ°å€å¯¹é½åˆ° 4n+3ã€‚

CPU æ‰§è¡Œä½œç”¨äºå†…å­˜ä¸­æ‰€å­˜å‚¨æ•°æ®çš„æŒ‡ä»¤ã€‚æ•°æ®åœ¨å†…å­˜ä¸­ç”¨åœ°å€æ ‡è¯†ã€‚å•ä¸ªåŸºå‡†ä¹Ÿå…·æœ‰å¤§å°ã€‚å¦‚æœä¸€ä¸ªåŸºå‡†çš„åœ°å€å¯¹é½åˆ°å…¶å¤§å°ï¼Œåˆ™ç§°å®ƒä¸ºè‡ªç„¶å¯¹é½ã€‚

ä¸€èˆ¬è€Œè¨€ï¼Œç¼–è¯‘å™¨ä¼šä»¥è‡ªç„¶å¯¹é½ç»“æ„çš„æ¯ä¸€ä¸ªå…ƒç´ çš„æ–¹å¼å¡«å……ç»“æ„ã€‚ä¾‹å¦‚ï¼š

```c++
struct x_
{
   char a;     // 1 byte
   // char _pad0[3];     // padding to put 'b' on 4-byte boundary
   int b;      // 4 bytes
   short c;    // 2 bytes
   char d;     // 1 byte
   // char _pad1[1];    // padding to make sizeof(x_) multiple of 4
} bar[3];
```

>---
#### å¸ƒå±€ä¸ POD

å¸ƒå±€æ˜¯æŒ‡ç±»ã€ç»“æ„æˆ–è”åˆç±»å‹å¯¹è±¡çš„æˆå‘˜åœ¨å†…å­˜ä¸­çš„æ’åˆ—æ–¹å¼ã€‚å¸ƒå±€ä¸€èˆ¬ç”±è¯­è¨€è§„èŒƒæ˜ç¡®å®šä¹‰ã€‚

å¦‚æœå½“ç±»æˆ–ç»“æ„åŒ…å«æŸäº› C++ è¯­è¨€åŠŸèƒ½ï¼ˆå¦‚è™šæ‹ŸåŸºç±»ã€è™šæ‹Ÿå‡½æ•°ã€å…·æœ‰ä¸åŒè®¿é—®æ§åˆ¶çš„æˆå‘˜ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±é€‰æ‹©å¸ƒå±€ã€‚è¯¥å¸ƒå±€å¯èƒ½ä¼šå› ç¼–è¯‘å™¨çš„ä¼˜åŒ–æœ‰æ‰€ä¸åŒï¼Œå¯¹è±¡ç”šè‡³å¯èƒ½ä¸ä¼šå ç”¨è¿ç»­å†…å­˜åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªç±»å…·æœ‰è™šæ‹Ÿå‡½æ•°ï¼Œåˆ™è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹å¯èƒ½ä¼šå…±äº«å•ä¸ªè™šæ‹Ÿå‡½æ•°è¡¨ã€‚ 

ç”±äºå¸ƒå±€æœªå®šä¹‰ï¼Œå› æ­¤æ— æ³•å°†å…¶ä¼ é€’åˆ°ä½¿ç”¨å…¶ä»–è¯­è¨€ï¼ˆä¾‹å¦‚ Cï¼‰ç¼–å†™çš„ç¨‹åºï¼Œå¹¶ä¸”ç”±äºå®ƒä»¬å¯èƒ½æ˜¯éè¿ç»­çš„ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨å¿«é€Ÿä½çº§å‡½æ•°ï¼ˆä¾‹å¦‚ `memcopy`ï¼‰å¯¹å…¶è¿›è¡Œå¯é å¤åˆ¶ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œå¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ã€‚

> *Trivial* ç±»å‹

å½“ C++ ä¸­çš„ç±»æˆ–ç»“æ„å…·æœ‰ç¼–è¯‘å™¨æä¾›çš„æˆ–æ˜¾å¼é»˜è®¤è®¾ç½®çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°æ—¶ï¼Œè¯¥ç±»æˆ–ç»“æ„ä¸ºæ™®é€šç±»å‹ã€‚å®ƒå ç”¨è¿ç»­å†…å­˜åŒºåŸŸã€‚

æ™®é€šç±»å‹å…·æœ‰æ™®é€šé»˜è®¤æ„é€ å‡½æ•°ã€æ™®é€šå¤åˆ¶æ„é€ å‡½æ•°ã€æ™®é€šå¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦å’Œæ™®é€šææ„å‡½æ•°ã€‚ åœ¨å„ç§æƒ…å†µä¸‹ï¼Œâ€œæ™®é€šâ€ æ„å‘³ç€æ„é€ å‡½æ•° / è¿ç®—ç¬¦ / ææ„å‡½æ•°å¹¶éç”¨æˆ·æä¾›ï¼Œå¹¶ä¸”å±äºå­˜åœ¨ä»¥ä¸‹æƒ…å†µçš„ç±»ï¼š
- æ²¡æœ‰è™šæ‹Ÿå‡½æ•°æˆ–è™šæ‹ŸåŸºç±»ï¼Œ
- æ²¡æœ‰å…·æœ‰ç›¸åº”éæ™®é€šæ„é€ å‡½æ•°/è¿ç®—ç¬¦/ææ„å‡½æ•°çš„åŸºç±»
- æ²¡æœ‰å…·æœ‰ç›¸åº”éæ™®é€šæ„é€ å‡½æ•°/è¿ç®—ç¬¦/ææ„å‡½æ•°çš„ç±»ç±»å‹çš„æ•°æ®æˆå‘˜

```c++
struct Trivial
{
   int i;
private:
   int j;
};

struct Trivial2
{
   int i;
   Trivial2(int a, int b) : i(a), j(b) {}
   Trivial2() = default;
private:
   int j;   // Different access control
};
```

> *standard-layout* ç±»å‹

å½“ç±»æˆ–ç»“æ„ä¸åŒ…å«æŸäº› C++ è¯­è¨€åŠŸèƒ½ï¼ˆä¾‹å¦‚æ— æ³•åœ¨ C è¯­è¨€ä¸­æ‰¾åˆ°çš„è™šæ‹Ÿå‡½æ•°ï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰æˆå‘˜éƒ½å…·æœ‰ç›¸åŒçš„è®¿é—®æ§åˆ¶æ—¶ï¼Œè¯¥ç±»æˆ–ç»“æ„ä¸ºæ ‡å‡†å¸ƒå±€ç±»å‹ã€‚å¯ä»¥åœ¨å†…å­˜ä¸­å¯¹å…¶è¿›è¡Œå¤åˆ¶ï¼Œå¯ä»¥ç”± C ç¨‹åºä½¿ç”¨ã€‚æ ‡å‡†å¸ƒå±€ç±»å‹å¯ä»¥å…·æœ‰ç”¨æˆ·å®šä¹‰çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ã€‚æ ‡å‡†å¸ƒå±€ç±»å‹è¿˜å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š
- æ²¡æœ‰è™šæ‹Ÿå‡½æ•°æˆ–è™šæ‹ŸåŸºç±»
- æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜éƒ½å…·æœ‰ç›¸åŒçš„è®¿é—®æ§åˆ¶
- ç±»ç±»å‹çš„æ‰€æœ‰éé™æ€æˆå‘˜å‡ä¸ºæ ‡å‡†å¸ƒå±€
- æ‰€æœ‰åŸºç±»éƒ½ä¸ºæ ‡å‡†å¸ƒå±€
- æ²¡æœ‰ä¸ç¬¬ä¸€ä¸ªéé™æ€æ•°æ®æˆå‘˜ç±»å‹ç›¸åŒçš„åŸºç±»ã€‚
- æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š
  - æœ€åº•å±‚æ´¾ç”Ÿç±»ä¸­æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ï¼Œå¹¶ä¸”å…·æœ‰éé™æ€æ•°æ®æˆå‘˜çš„åŸºç±»ä¸è¶…è¿‡ä¸€ä¸ªï¼Œæˆ–è€…
  - ä¸å«éé™æ€æ•°æ®æˆå‘˜çš„åŸºç±»

```c++
struct SL
{
   // All members have same access:
   int i;
   int j;
   SL(int a, int b) : i(a), j(b) {} // User-defined constructor OK
};
```

`Base` æ˜¯æ ‡å‡†å¸ƒå±€ï¼Œ`Derived` ä¸æ˜¯æ ‡å‡†å¸ƒå±€ï¼Œå®ƒï¼ˆæœ€åº•å±‚æ´¾ç”Ÿç±»ï¼‰å’Œ `Base` éƒ½å…·æœ‰éé™æ€æ•°æ®æˆå‘˜ï¼š

```c++
struct Base
{
   int i;
   int j;
};

// std::is_standard_layout<Derived> == false!
struct Derived : public Base
{
   int x;
   int y;
};
```

`Derived` æ˜¯æ ‡å‡†å¸ƒå±€ï¼Œå› ä¸º `Base` æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ï¼š

```c++
struct Base
{
   void Foo() {}
};

// std::is_standard_layout<Derived> == true
struct Derived : public Base
{
   int x;
   int y;
};
```

å¦‚æœ `Base` å…·æœ‰æ•°æ®æˆå‘˜ï¼Œå¹¶ä¸” `Derived` ä»…å…·æœ‰æˆå‘˜å‡½æ•°ï¼Œåˆ™ `Derived` ä¹Ÿæ˜¯æ ‡å‡†å¸ƒå±€ã€‚

> POD ç±»å‹

å½“æŸä¸€ç±»æˆ–ç»“æ„åŒæ—¶ä¸ºæ™®é€šå’Œæ ‡å‡†å¸ƒå±€æ—¶ï¼Œè¯¥ç±»æˆ–ç»“æ„ä¸º PODï¼ˆç®€å•æ—§æ•°æ®ï¼‰ç±»å‹ã€‚ å› æ­¤ï¼ŒPOD ç±»å‹çš„å†…å­˜å¸ƒå±€æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”æ¯ä¸ªæˆå‘˜çš„åœ°å€éƒ½æ¯”åœ¨å…¶ä¹‹å‰å£°æ˜çš„æˆå‘˜è¦é«˜ï¼Œä»¥ä¾¿å¯ä»¥å¯¹è¿™äº›ç±»å‹æ‰§è¡Œé€å­—èŠ‚å¤åˆ¶å’ŒäºŒè¿›åˆ¶ I/Oã€‚æ ‡é‡ç±»å‹ï¼ˆä¾‹å¦‚ `int`ï¼‰ä¹Ÿæ˜¯ POD ç±»å‹ã€‚

ä½œä¸ºç±»çš„ POD ç±»å‹åªèƒ½å…·æœ‰ä½œä¸ºéé™æ€æ•°æ®æˆå‘˜çš„ POD ç±»å‹ã€‚

> æ™®é€šã€æ ‡å‡†å¸ƒå±€å’Œ POD ç±»å‹ä¹‹é—´çš„åŒºåˆ«

```c++
#include <type_traits>
#include <iostream>

using namespace std;

struct B
{
protected:
   virtual void Foo() {}
};

// Neither trivial nor standard-layout
struct A : B
{
   int a;
   int b;
   void Foo() override {} // Virtual function
};

// Trivial but not standard-layout
struct C
{
   int a;
private:
   int b;   // Different access control
};

// Standard-layout but not trivial
struct D
{
   int a;
   int b;
   D() {} //User-defined constructor
};

struct POD
{
   int a;
   int b;
};

int main()
{
   cout << boolalpha;
   cout << "A is trivial is " << is_trivial<A>() << endl; // false
   cout << "A is standard-layout is " << is_standard_layout<A>() << endl;  // false

   cout << "C is trivial is " << is_trivial<C>() << endl; // true
   cout << "C is standard-layout is " << is_standard_layout<C>() << endl;  // false

   cout << "D is trivial is " << is_trivial<D>() << endl;  // false
   cout << "D is standard-layout is " << is_standard_layout<D>() << endl; // true

   cout << "POD is trivial is " << is_trivial<POD>() << endl; // true
   cout << "POD is standard-layout is " << is_standard_layout<POD>() << endl; // true

   return 0;
}
```

> æ–‡æœ¬ç±»å‹

æ–‡æœ¬ç±»å‹æ˜¯å¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…¶å¸ƒå±€çš„ç±»å‹ã€‚ä»¥ä¸‹å‡ä¸ºæ–‡æœ¬ç±»å‹ï¼š
- `void`ã€æ ‡é‡ç±»å‹ã€å¼•ç”¨ï¼›
- `void`ã€æ ‡é‡ç±»å‹æˆ–å¼•ç”¨çš„æ•°ç»„
- å…·æœ‰æ™®é€šææ„å‡½æ•°ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª `constexpr` æ„é€ å‡½æ•°ä¸”æ²¡æœ‰ç§»åŠ¨æˆ–å¤åˆ¶æ„é€ å‡½æ•°çš„ç±»ã€‚æ­¤å¤–ï¼Œå…¶æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å’ŒåŸºç±»å¿…é¡»æ˜¯æ–‡æœ¬ç±»å‹ä¸”ä¸å¯å˜ã€‚

>---
#### å€¼ç±»å‹

é»˜è®¤æƒ…å†µä¸‹ï¼ŒC++ ç±»æ˜¯å€¼ç±»å‹ã€‚å¯ä»¥æŒ‡å®šä¸ºå¼•ç”¨ç±»å‹ï¼Œä»¥å¤šæ€è¡Œä¸ºæ”¯æŒé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹å¯ä»¥å¤åˆ¶ï¼Œè¿™æ„å‘³ç€æ€»æ˜¯æœ‰ä¸€ä¸ªå¤åˆ¶æ„é€ å‡½æ•°å’Œä¸€ä¸ªå¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦ã€‚ 

å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå°†ç±»è®¾ä¸ºä¸å¯å¤åˆ¶ï¼ˆç¦ç”¨å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦ï¼‰ï¼Œå¹¶ä½¿ç”¨æ”¯æŒå…¶é¢„æœŸå¤šæ€æ€§çš„è™šæ‹Ÿææ„å‡½æ•°ã€‚ 

```c++
class MyRefType {
private:
    MyRefType & operator=(const MyRefType &);
    MyRefType(const MyRefType &);
public:
    MyRefType () {}
};

int main()
{
    MyRefType Data1, Data2;
    // ...
    Data1 = Data2;
    // error: 'MyRefType::operator =' : cannot access private member declared in class 'MyRefType'
}
```

> *å€¼ç±»å‹å’Œç§»åŠ¨æ•ˆç‡*

ç±»å¿…é¡»é€šè¿‡åœ¨ç±»å®šä¹‰ä¸­å£°æ˜ç§»åŠ¨èµ‹å€¼å’Œç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä»¥æ”¯æŒå¤åˆ¶æ—¶çš„ç§»åŠ¨ä¼˜åŒ–ï¼Œé¿å…å¤åˆ¶åˆ†é…å¼€é”€ã€‚*Move* ä½¿ç”¨ `&&` *rvalue* å¼•ç”¨ï¼Œå®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼å‡½æ•°ã€‚

 <!-- TODO -->

>---
#### ç±»å‹è½¬æ¢ TODO

å½“è¡¨è¾¾å¼åŒ…å«ä¸åŒå†…ç½®ç±»å‹çš„æ“ä½œæ•°ä¸”ä¸å­˜åœ¨æ˜¾å¼å¼ºåˆ¶è½¬æ¢æ—¶ï¼Œç¼–è¯‘å™¨å°†ä½¿ç”¨å†…ç½®çš„ â€œæ ‡å‡†è½¬æ¢â€ æ¥è½¬æ¢å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ï¼Œä»è€Œä½¿ç±»å‹ç›¸åŒ¹é…ã€‚

åœ¨æ‰©å¤§è½¬æ¢ä¸­ï¼Œè¾ƒå°çš„å˜é‡ä¸­çš„å€¼å°†èµ‹ç»™è¾ƒå¤§çš„å˜é‡ï¼ŒåŒæ—¶ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚æ‰©å¤§è½¬æ¢å§‹ç»ˆæ˜¯å®‰å…¨çš„ã€‚

æ”¶ç¼©è½¬æ¢å¯èƒ½å­˜åœ¨æ•°æ®ä¸¢å¤±ï¼Œéšå¼æ‰§è¡Œæ”¶ç¼©è½¬æ¢ç¼–è¯‘å™¨å‘å‡ºè­¦å‘Šï¼Œå¯ä»¥æ·»åŠ æ˜¾å¼å¼ºåˆ¶è½¬æ¢ã€‚ä»»ä½•ä»æµ®ç‚¹ç±»å‹åˆ°æ•´å‹çš„è½¬æ¢éƒ½æ˜¯æ”¶ç¼©è½¬æ¢ï¼Œå°æ•°éƒ¨åˆ†å°†ä¼šä¸¢å¼ƒã€‚

```c++
int i = INT_MAX + 1;   // warning:'+':integral constant overflow
wchar_t wch = 'A';     // OK
char c = wch;          
// warning:'initializing':conversion from 'wchar_t' to 'char', possible loss of data

unsigned char c2 = 0xfffe; 
// warning:'initializing':truncation from 'int' to 'unsigned char'

int j = 1.9f; 
// warning:'initializing':conversion from 'float' to 'int', possible loss of data

int k = 7.7; 
// warning:'initializing':conversion from 'double' to 'int', possible loss of data
```

æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´å‹ä¹‹é—´çš„éšå¼è½¬æ¢ï¼Œå…·æœ‰ç›¸åŒçš„ä½æ¨¡å¼å’Œä¸åŒçš„å€¼è§£é‡Šæ–¹å¼ã€‚ç¼–è¯‘å™¨ä¸ä¼šå‘å‡ºæœ‰å…³æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´å‹ä¹‹é—´çš„éšå¼è½¬æ¢çš„è­¦å‘Šã€‚

åˆ©ç”¨å¼ºåˆ¶è½¬æ¢è¿ç®—ï¼Œå¯ä»¥æŒ‡ç¤ºç¼–è¯‘å™¨å°†ä¸€ç§ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚ä¾‹å¦‚ä»æŒ‡å‘æ´¾ç”Ÿç±»çš„æŒ‡é’ˆåˆ°æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆçš„å¼ºåˆ¶è½¬æ¢ã€‚è¿˜æœ‰ä¸€ç§ä½¿ç”¨æƒ…å†µæ˜¯å¼ºåˆ¶è½¬æ¢æ”¹å˜å˜é‡çš„å¸¸é‡æ€§ä»¥å°†å…¶ä¼ é€’ç»™éœ€è¦éå¸¸é‡å‚æ•°çš„å‡½æ•°ã€‚

```c++
(int) x;  // old-style cast, old-style syntax
int(x);   // old-style cast, functional syntax

static_cast<T>(v)
dynamic_cast<Derived>(base)
const_cast<constT>(noconstv)
reinterpret_cast<T>(v)
```

---
### å£°æ˜ä¸å®šä¹‰

ç¨‹åºçš„å®ä½“ï¼ˆ*Entity*ï¼‰åŒ…æ‹¬å€¼ã€å¯¹è±¡ã€å¼•ç”¨ã€ç»“æ„åŒ–ç»‘å®šã€å‡½æ•°ã€æšä¸¾å™¨ã€ç±»å‹ã€ç±»æˆå‘˜ã€ä½å­—æ®µã€æ¨¡æ¿ã€æ¨¡æ¿ä¸“ç”¨åŒ–ã€å‘½åç©ºé—´æˆ–åŒ…ã€‚

å®ä½“çš„åç§°ç”±å£°æ˜å¼•å…¥ï¼Œå£°æ˜å¯ä»¥æ˜¯åç§°å£°æ˜ã€å—å£°æ˜æˆ–æˆå‘˜å£°æ˜ï¼›åˆå§‹åŒ–å£°æ˜ï¼›ç»“æ„åŒ–ç»‘å®šå£°æ˜ï¼›å‚æ•°ã€ç±»å‹å‚æ•°ã€ç±»å‹å®šä¹‰ç­‰ã€‚å®ä½“ `E` ç”±å£°æ˜ `E` å¼•å…¥çš„åç§°ï¼ˆå¦‚æœæœ‰ï¼‰æˆ–ç”±æŒ‡å®š `E` çš„å£°æ˜å¼•å…¥çš„ *typedef-name* è¡¨ç¤ºã€‚

å˜é‡æ˜¯é€šè¿‡å£°æ˜éé™æ€æ•°æ®æˆå‘˜æˆ–å¯¹è±¡ä»¥å¤–çš„å¼•ç”¨æ¥å¼•å…¥çš„ã€‚å˜é‡çš„åç§°ï¼ˆå¦‚æœæœ‰ï¼‰è¡¨ç¤ºå¼•ç”¨æˆ–å¯¹è±¡ã€‚å±€éƒ¨å®ä½“æ˜¯å…·æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„å˜é‡ã€ç»“æ„åŒ–ç»‘å®šå¯¹åº”çš„å˜é‡ï¼Œæˆ– *this å¯¹è±¡ã€‚

å£°æ˜å¯ä»¥ï¼ˆé‡æ–°ï¼‰å°†ä¸€ä¸ªæˆ–å¤šä¸ªåç§°å’Œ / æˆ–å®ä½“å¼•å…¥ç¿»è¯‘å•å…ƒï¼Œå¹¶æŒ‡å®šè¿™äº›åç§°çš„è§£é‡Šå’Œè¯­ä¹‰å±æ€§ã€‚å¦‚æœå¯ä»¥ä»å®ä½“æˆ– *typedef-name* `X` ä¸­è·å–å¦ä¸€ä¸ª `X` å£°æ˜ï¼Œåˆ™è¯¥å®ä½“æˆ– *typedef-name* `X` çš„å£°æ˜æ˜¯ `X` çš„é‡æ–°å£°æ˜ã€‚

```c++
// å®šä¹‰å£°æ˜
int a;                         // defines a
extern const int c = 1;        // defines c
int f(int x) { return x + a; } // defines f and defines x
struct S
{
    int a;
    int b;
}; // defines S, S::a, and S::b
struct X
{                 // defines X
    int x;        // defines non-static data member x
    static int y; // declares static data member y
    X() : x(0) {} // defines a constructor of X
};
int X::y = 1; // defines X::y
enum
{
    up,
    down
}; // defines up and down
namespace N
{
    int d;
} // defines N and N::d
namespace N1 = N; // defines N1
X anX;            // defines anX

// ä»…å£°æ˜
extern int a;       // declares a
extern const int c; // declares c
int f(int);         // declares f
struct S;           // declares S
typedef int Int;    // declares Int
extern X anotherX;  // declares anotherX
using N::d;         // declares d
```

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šä¸ºä¸€äº›å®šä¹‰å£°æ˜éšå¼å®šä¹‰é»˜è®¤æ„é€ å‡½æ•°ã€èµ‹å€¼æ„é€ å‡½æ•°ã€ç§»åŠ¨æ„é€ å‡½æ•°ã€å¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æˆ–ç»ˆç»“å™¨ã€‚

```c++
struct C {
    std::string s; // std::string is the standard library class (23.4)
};
// å®ç°å°†éšå¼å®šä¹‰
struct C
{
    std::string s;
    C() : s() {}
    C(const C &x) : s(x.s) {}
    C(C &&x) : s(static_cast<std::string &&>(x.s)) {}
    // : s(std::move(x.s)) { }
    C &operator=(const C &x)
    {
        s = x.s;
        return *this;
    }
    C &operator=(C &&x)
    {
        s = static_cast<std::string &&>(x.s);
        return *this;
    }
    // { s = std::move(x.s); return *this; }
    ~C() {}
};
```




---
### ç±»å‹ä¸å˜é‡


---
### è¡¨è¾¾å¼


---
### è¯­å¥



---
### é¢„å¤„ç†æŒ‡ä»¤

```c++
// æ¡ä»¶åŒ…å«
defined                       // æ¡ä»¶ç¼–è¯‘ç¬¦å·æµ‹è¯•
__has_include (C++17)         // æºæ–‡ä»¶åŒ…å«æµ‹è¯•
__has_cpp_attribute (C++20)   // å±æ€§æµ‹è¯•
// æ¡ä»¶æ§åˆ¶
#if
#elif
#else
#endif
#ifdef
#ifndef
#elifdef (C++23)
#elifndef (C++23)
// å®å®šä¹‰ä¸å–æ¶ˆå®å®šä¹‰
#define
#undef
// æºæ–‡ä»¶åŒ…å«
#include
import (C++20)
// æ–‡ä»¶åå’Œè¡Œä¿¡æ¯
#line
// è¯Šæ–­æŒ‡ä»¤
#error
#warning (C++23)
// å®ç°å®šä¹‰è¡Œä¸ºæ§åˆ¶
#pragma
_Pragma

export (C++20)
module (C++20)
```

>---
#### æ¡ä»¶åŒ…å«

```c++
defined ( identifier )               // æ¡ä»¶ç¼–è¯‘ç¬¦å·æµ‹è¯•
__has_include ( heeder-name )        // æºæ–‡ä»¶åŒ…å«æµ‹è¯•
__has_cpp_attribute ( pre-tokens )   // å±æ€§æµ‹è¯•
```

æ§åˆ¶æ¡ä»¶åŒ…å«çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ•´æ•°å¸¸é‡è¡¨è¾¾å¼ï¼Œå®ƒå¯èƒ½åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª `defined()`, `__has_include()`, `__has_cpp_attribute()` ä¸€å…ƒè¿ç®—ç¬¦è¡¨è¾¾å¼ã€‚

å·²å­˜åœ¨å®šä¹‰çš„å®åç§°ï¼Œ`defined(id)` è¿”å› 1ï¼Œè¿™æ ·çš„å®åç§°ç”± `#define` å®šä¹‰ä¸”åœ¨æ¡ä»¶åŒ…å«çš„è°ƒç”¨ç‚¹ä¹‹å‰æ²¡æœ‰ `#undef` å–æ¶ˆã€‚

`__has_include( header )` æ£€ç´¢ `header` æ˜¯å¦ç”± `#include` å¯¼å…¥ï¼›åœ¨ `__has_cpp_attribute( attr-pp-token )` ä¸­ï¼Œå¦‚æœå®ç°æ”¯æŒé€šè¿‡å±•å¼€å¹¶è§£é‡Š `pp-token` æŒ‡å®šåç§°çš„å±æ€§ï¼Œåˆ™æ¯ä¸ªåŒ…å«è¡¨è¾¾ç¤ºéƒ½å°†æ›¿æ¢ä¸ºç›¸åº”çš„ `pp-token` çš„æ•´æ•°å½¢å¼ã€‚

```c++
#define assume              202207L
#define carries_dependency  200809L
#define deprecated          201309L
#define fallthrough         201603L
#define likely              201803L
#define maybe_unused        201603L
#define no_unique_address   201803L
#define nodiscard           201907L
#define noreturn            200809L
#define unlikely            201803L
```

>---
#### æ¡ä»¶æ§åˆ¶æŒ‡ä»¤

```c++
#if constant-expr
#elif constant-expr
#ifdef identifier      // #if defined identifier
#ifndef identifier     // #if !defined identifier 
#elifdef identifier    // #elif defined identifier 
#elifndef identifier   // #elif !defined identifier 
#else
#endif
```

`#ifdef`ã€`#ifndef`ã€`#elifdef` å’Œ `#elifndef` æŒ‡ä»¤ä»¥åŠ `defined` æ¡ä»¶åŒ…å«è¿ç®—ç¬¦åº”å°† `__has_include` å’Œ `__has_cpp_attribute` è§†ä¸ºå®šä¹‰å®çš„åç§°ã€‚

è¿™äº›é¢„å¤„ç†æŒ‡ä»¤æ£€æŸ¥æ§åˆ¶è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœæ˜¯å¦ä¸ºéé›¶ï¼›æ ¹æ®ç»“æœæ¥é€‰æ‹©æ€§çš„è·³è¿‡ç»“æœä¸º `false`ï¼ˆé›¶ï¼‰çš„ç»„ï¼›ç»„ä¸­çš„ä»£ç å’ŒåµŒå¥—é¢„å¤„ç†æŒ‡ä»¤è¢«å¿½ç•¥ã€‚

```c++
#if __has_include(<optional>)
# include <optional>
# if __cpp_lib_optional >= 201603
# define have_optional 1
# endif
#elif __has_include(<experimental/optional>)
# include <experimental/optional>
# if __cpp_lib_experimental_optional >= 201411
# define have_optional 1
# define experimental_optional 1
# endif
#endif
#ifndef have_optional
# define have_optional 0
#endif

#if __has_cpp_attribute(acme::deprecated)
# define ATTR_DEPRECATED(msg) [[acme::deprecated(msg)]]
#else
# define ATTR_DEPRECATED(msg) [[deprecated(msg)]]
#endif
ATTR_DEPRECATED("This function is deprecated") void anvil();
```

>---
#### æºæ–‡ä»¶åŒ…å«

```c++
#include <header-name> 
#include "header-name" 
#include "source-name" 
```

`#include` æŒ‡ä»¤ä»¥å®ç°å®šä¹‰çš„æ–¹å¼æœç´¢å‘½åæºæ–‡ä»¶ï¼Œå¹¶å°†è¯¥ä½ç½®æ›¿æ¢ä¸ºæºæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ã€‚å¦‚æœ *header-name* æ ‡è¯†ä¸€ä¸ªå¯å¯¼å…¥çš„å¤´æ–‡ä»¶ï¼Œåˆ™ç”±å®ç°å®šä¹‰æ˜¯å¦å°† `#include` é¢„å¤„ç†æŒ‡ä»¤æ›¿æ¢ä¸º `import header-name;`ã€‚

```c++
#if VERSION == 1
#define INCFILE "vers1.h"
#elif VERSION == 2
#define INCFILE "vers2.h" // and so on
#else
#define INCFILE "versN.h"
#endif
#include INCFILE
```

>---
#### æ¨¡å—æŒ‡ä»¤

```c++

```

æ¨¡å—æŒ‡ä»¤ä¸­æ¨¡å—é¢„å¤„ç†ä»¤ç‰Œä¹‹åçš„ä»»ä½•é¢„å¤„ç†ä»¤ç‰Œçš„å¤„ç†æ–¹å¼ä¸æ™®é€šæ–‡æœ¬ç›¸åŒã€‚

